<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Registration Form | CodingLab</title>
  <link rel="stylesheet" href="add_vehicle.css">

  <!-- Firebase SDKs -->
  <script type="module">
    // Import the Firebase SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBPeVngqblNwdwrV9M5xBn4KsseyZEzbMU",
      authDomain: "rfid-web-2db15.firebaseapp.com",
      databaseURL: "https://rfid-web-2db15-default-rtdb.asia-southeast1.firebasedatabase.app/",
      projectId: "rfid-web-2db15",
      storageBucket: "rfid-web-2db15.appspot.com",
      messagingSenderId: "131924740941",
      appId: "1:131924740941:web:98da292c68989fd0c50504"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Handle form submission
    window.addEventListener("DOMContentLoaded", () => {
      document.querySelector("form").addEventListener("submit", (e) => {
        e.preventDefault();

        // Get form values
        const name = document.getElementById("name").value;
        const contact = document.getElementById("contact").value;
        const address = document.getElementById("address").value;
        const bodyNumber = document.getElementById("bodyNumber").value;
        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirmPassword").value;

        // Check if passwords match
        if (password !== confirmPassword) {
          alert("Passwords do not match!");
          return;
        }

        // Reference for the database path
        const userRef = push(ref(db, 'vehicleOperators'));
        
        // Save to Firebase Realtime Database
        set(userRef, {
          name: name,
          contact: contact,
          address: address,
          bodyNumber: bodyNumber,
          password: password
        }).then(() => {
          alert("Registration successful!");
          // Clear the form fields
          document.querySelector("form").reset();
        }).catch((error) => {
          console.error("Error saving to database", error);
          alert("Error saving to database: " + error.message);
        });
      });
    });
  </script>
</head>
<body>
  <div class="container">

    <!-- Close button -->
    <div class="close-btn">&times;</div>

    <!-- Title section -->
    <div class="title">Vehicle Operator</div>
    <div class="content">
      <!-- Registration form -->
      <form action="#">
        <div class="user-details">
          <!-- Input for Full Name -->
          <div class="input-box">
            <span class="details">Full Name</span>
            <input type="text" id="name" placeholder="Enter your name" required>
          </div>
          <!-- Input for Contact Number -->
          <div class="input-box">
            <span class="details">Contact Number</span>
            <input type="text" id="contact" placeholder="Enter your contact number" required>
          </div>
          <!-- Input for Address -->
          <div class="input-box">
            <span class="details">Address</span>
            <input type="text" id="address" placeholder="Enter your full address">
          </div>
          <!-- Input for Body Number -->
          <div class="input-box">
            <span class="details">Body Number</span>
            <input type="text" id="bodyNumber" placeholder="Enter your body number" required>
          </div>
          <!-- Input for Password -->
          <div class="input-box">
            <span class="details">Password</span>
            <input type="password" id="password" placeholder="Enter your password" required>
          </div>
          <!-- Input for Confirm Password -->
          <div class="input-box">
            <span class="details">Confirm Password</span>
            <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
          </div>
         
        </div>
        
        <!-- Submit button -->
        <div class="button">
          <input type="submit" value="Register">
        </div>
      </form>
    </div>
  </div>
</body>
</html>